<div class="top-source-title" *ngIf="project_list?.length">
    <h4><strong>TOP SOURCE CODE MỚI NHẤT</strong></h4>

    <!-- Nút chuyển đổi view -->
    <div class="view-toggle">
        <button [class.active]="viewType === 'card'" (click)="setViewType('card')">
            <i class="bi bi-grid-fill"></i>
        </button>
        <button [class.active]="viewType === 'list'" (click)="setViewType('list')">
            <i class="bi bi-list-ul"></i>
        </button>
    </div>
</div>

<div *ngIf="viewType === 'card' && project_list?.length">

    <div class="product-grid" *ngIf="project_list?.length">

        <div class="product-list">

            <div class="product-card" *ngFor="let item of pagedData">

                <div class="thumb">
                    <img [src]="item.thumbnailUrl" alt="" />
                </div>

                <div class="thumb-actions">
                    <button>Xem chi tiết</button>
                    <button>Lưu code</button>
                </div>

                <div class="tag">
                    <i class="fas fa-code"></i> {{ item.categoryName }}
                </div>

                <h3 class="title">
                    <a [routerLink]="['/source-code', item.slug]">{{ item.title }}</a>
                </h3>

                <div class="price">
                    {{ item.price | number }} đ
                </div>

                <div class="rating">
                    <i *ngFor="let s of [1,2,3,4,5]" class="fa-star" [ngClass]="s <= item.star ? 'fas active' : 'far'">
                    </i>
                    <span>1 đánh giá</span>
                </div>

                <div class="bottom-row">
                    <div class="seller">
                        <img [src]="avatar" />
                        <span>{{ item.seller }}</span>
                    </div>

                    <div class="actions">
                        <i (click)="bookmark(item.id)"
                            [ngClass]="{'fas fa-bookmark': true, 'text-warning': item.isFavorite}"
                            [ngStyle]="{'color': item.isFavorite ? 'yellow' : 'gray'}">
                        </i>
                        <i class="fas fa-download"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- List view -->
<div *ngIf="viewType === 'list' && project_list?.length">
    <div class="list-view">

        <div class="list-item" *ngFor="let item of pagedData">

            <div class="thumb">
                <img [src]="item.thumbnailUrl" alt="" />
            </div>

            <div class="content-info">
                <h3 class="title">{{ item.title }}</h3>

                <div class="rating">
                    <i *ngFor="let s of [1,2,3,4,5]"
                        [ngClass]="s <= item.star ? 'fas fa-star active' : 'far fa-star'"></i>
                </div>

                <div class="details-row">
                    <div><strong>Danh mục:</strong> {{ item.categoryName }}</div>
                    <div><strong>Thể loại:</strong> {{ item.typeName }}</div>
                    <div><strong>Phí tải:</strong> <span class="price">{{ item.price | number }} Xu</span></div>
                </div>

                <div class="details-row">
                    <div><strong>Ngày:</strong> {{ item.createdAt | date:'dd-MM-yyyy' }}</div>
                    <div><strong>Loại file:</strong> Full code</div>
                    <div><strong>Dung lượng:</strong> #</div>
                </div>
            </div>

            <div class="actions">
                <button class="btn-download" title="Download"><i class="fas fa-download"></i></button>
                <button class="btn-favorite" title="Yêu thích"><i class="fas fa-heart"></i></button>
                <button class="btn-save" title="Lưu"><i class="fas fa-folder"></i></button>
            </div>

        </div>
    </div>

</div>
<br>
<div class="pagination" *ngIf="totalPages > 1">
    <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">‹</button>

    <button *ngFor="let p of visiblePages" (click)="isNumber(p) ? goToPage(p) : null" [class.active]="p === currentPage"
        [disabled]="p === '…'">
        {{ p }}
    </button>

    <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">›</button>
</div>