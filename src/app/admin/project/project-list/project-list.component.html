<div class="bear-container">
    <div class="filter-toggle-wrapper" *ngIf="!isDesktop">
        <button class="toggle-filter-btn" (click)="toggleFilter()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                <path
                    d="M6 10.5v5l4-2.5V10.5H6zm-4-7A.5.5 0 0 1 2.5 3h11a.5.5 0 0 1 .39.81l-5.11 6.25a.5.5 0 0 0-.13.34V14a.5.5 0 0 1-1 0v-3.6a.5.5 0 0 0-.13-.34L1.61 3.81A.5.5 0 0 1 2 3.5z" />
            </svg>
        </button>
    </div>



    <div class="filter-box" [ngClass]="{'show': showFilter}" *ngIf="showFilter || isDesktop">

        <div class="filter-left">
            <div class="filter-item">
                <input type="text" placeholder="Từ ngày" bsDatepicker [(ngModel)]="dateFrom" [bsConfig]="{
      containerClass: 'theme-datepicker',
      dateInputFormat: 'DD/MM/YYYY',  showWeekNumbers: false

    }" (bsValueChange)="onDateFromChange($event)">
            </div>

            <div class="filter-item">
                <input type="text" placeholder="Đến ngày" bsDatepicker [(ngModel)]="dateTo" [bsConfig]="{
      containerClass: 'theme-datepicker',
      dateInputFormat: 'DD/MM/YYYY',  showWeekNumbers: false

    }" (bsValueChange)="onDateToChange($event)">
            </div>

        </div>

        <div class="filter-right">
            <div class="filter-item">
                <input type="text" placeholder="Nhập tên, mã..." [(ngModel)]="searchText" (input)="applyFilter()">
            </div>
        </div>
    </div>

    <div class="bear-header">
        <div class="h-col img">Ảnh</div>
        <div class="h-col title">Tiêu đề</div>
        <div class="h-col desc">Mô tả</div>
        <div class="h-col price">Giá</div>
        <div class="h-col price">Trạng thái</div>
        <div class="h-col date">Ngày tạo</div>
        <div class="h-col zip">Link tải xuống</div>
    </div>

    <div class="bear-list">
        <div class="bear-item" *ngFor="let item of pagedData" (dblclick)="dblclickProject()"
            (click)="clickProject(item)" [ngClass]="{'bear-item-selected': project_id?.id === item?.id}">

            <div class="col img">
                <img [src]="item.thumbnailUrl" alt="Thumbnail" width="60" height="60">
            </div>

            <div class="col title">{{ item.title }}</div>

            <div class="col desc">{{ item.description | linebreaks}}</div>

            <div class="col price">{{ item.price | number }} đ</div>

            <div class="col date">
                <i class="fa toggle-status" (click)="toggleStatus(item)"
                    [class]="item.status === 'active' ? 'fa-toggle-on active' : 'fa-toggle-off locked'"
                    title="Bật / Tắt trạng thái"></i>
            </div>
            <div class="col date">{{ item.createdAt | date:'dd/MM/yyyy HH:mm' }}</div>

            <div class="col zip">
                <a [href]="item.zipPath" target="_blank">Link</a>
            </div>
            <!-- ✅ NÚT THAO TÁC -->
            <div class="col action" (click)="$event.stopPropagation()">
                <button class="btn-edit" (click)="onEdit(item)">Cập nhật</button>
                <button class="btn-delete" (click)="onDelete(item.id)">Xoá</button>
            </div>
        </div>
        <div class="pagination">
            <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">‹</button>

            <span>Trang {{ currentPage }} / {{ totalPages }}</span>

            <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">›</button>
        </div>
    </div>

</div>